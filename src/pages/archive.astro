---
import Container from "~/components/common/container.astro";
import Layout from "~/layouts/Layout.astro";
import { Image } from "astro:assets";
import { basehub } from "~/lib/basehub";
import Link from "~/components/common/link.astro";
import LOVE from "~/assets/gfx/LOVE.webp";
import MILLENIUM from "~/assets/gfx/MILLENIUM.webp";
import TAKEOVER from "~/assets/gfx/TAKEOVER.webp";
import freedom from "~/assets/gfx/freedom.webp";
import illicit from "~/assets/gfx/illicit.webp";
import insanity from "~/assets/gfx/insanity.webp";
import intongues from "~/assets/gfx/intongues.webp";
import kendrick from "~/assets/gfx/kendrick.webp";
import redemption from "~/assets/gfx/redemption.webp";
import wanted from "~/assets/gfx/wanted.webp";
import zillionaire from "~/assets/gfx/zillionaire.webp";
import { cn } from "~/lib/utils";
import { getBlurPlaceholder } from "~/lib/lqip";

const images = [
  { src: LOVE, alt: "LOVE", path: "gfx/LOVE.webp" },
  { src: MILLENIUM, alt: "MILLENIUM", path: "gfx/MILLENIUM.webp" },
  { src: TAKEOVER, alt: "TAKEOVER", path: "gfx/TAKEOVER.webp" },
  { src: freedom, alt: "freedom", path: "gfx/freedom.webp" },
  { src: illicit, alt: "illicit", path: "gfx/illicit.webp" },
  { src: insanity, alt: "insanity", path: "gfx/insanity.webp" },
  { src: intongues, alt: "intongues", path: "gfx/intongues.webp" },
  { src: redemption, alt: "redemption", path: "gfx/redemption.webp" },
  { src: kendrick, alt: "kendrick", path: "gfx/kendrick.webp" },
  { src: wanted, alt: "wanted", path: "gfx/wanted.webp" },
  { src: zillionaire, alt: "zillionaire", path: "gfx/zillionaire.webp" },
];

const {
  archive: {
    links: { items: links },
  },
} = await basehub.query({
  archive: {
    links: {
      __args: { orderBy: "_sys_createdAt__DESC" },
      items: { _id: true, _title: true, link: true },
    },
  },
});
---

<Layout
  content={{
    title: "archive | advtszn",
    description:
      "old graphics, experiments, and little corners of the web that stuck with me.",
  }}
>
  <main>
    <Container>
      <div class="space-y-4 md:space-y-6">
        <h1 class="font-serif text-4xl italic md:text-6xl">archive</h1>
        <div
          class="flex flex-col-reverse gap-y-12 lg:flex-row lg:justify-between lg:gap-y-0"
        >
          <div class="space-y-4 lg:max-w-[45%]">
            <h2 class="font-serif text-2xl lg:text-4xl">gfx</h2>
            <p class="text-muted-foreground text-lg">
              the artworks below are some of my creations from back in the day
              when i gave graphic designing a shot
            </p>
            <div
              id="masonry"
              class={cn(
                "gap-x-2 leading-0 ",
                "[-moz-column-count:3] [-moz-column-gap:8px] [-webkit-column-count:3] [-webkit-column-gap:8px] [column-count:3]",
              )}
            >
              {
                images.map(async (img) => {
                  const blurDataURL = await getBlurPlaceholder(img.path);

                  return (
                    <div class="lqip-container relative mb-2 w-3xs overflow-hidden rounded">
                      <img
                        src={blurDataURL}
                        alt=""
                        aria-hidden="true"
                        class="lqip-blur absolute inset-0 h-full w-full scale-110 object-cover blur-lg"
                      />
                      <Image
                        src={img.src}
                        alt={img.alt}
                        class="lqip-image relative h-auto w-full cursor-zoom-in"
                        data-full={img.src.src}
                        loading="lazy"
                      />
                    </div>
                  );
                })
              }
            </div>
            <div
              id="previewModal"
              class="fixed inset-0 z-50 hidden items-center justify-center bg-black/80"
            >
              <img
                id="previewImg"
                src=""
                alt="full preview"
                class="max-h-[90%] max-w-[90%] rounded-lg shadow-lg"
              />
            </div>
          </div>

          <div class="space-y-4 lg:max-w-[45%]">
            <h2 class="font-serif text-2xl lg:text-4xl">content i like</h2>
            <p class="text-muted-foreground text-lg">
              list of links from the internet that i like/appreciate (yea i
              copied this from <Link href="https://farza.com/content"
                >farza</Link
              >). i'll try to keep this updated
            </p>
            <ol class="list-inside list-decimal space-y-1.5">
              {
                links.map(({ link, _id, _title }) => (
                  <li class="text-lg font-light">
                    <a
                      target="_blank"
                      class="underline underline-offset-4"
                      href={link}
                    >
                      {_title}
                    </a>
                  </li>
                ))
              }
            </ol>
          </div>
        </div>
      </div>
    </Container>
  </main>
</Layout>
